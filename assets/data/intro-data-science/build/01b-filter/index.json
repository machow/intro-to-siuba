{"hash":"a516818faf1ce23eaac5c3319f126540daf3b162","data":{"metadata":{"siteName":"Siuba tutorials","siteDescription":""},"page":{"id":"ba1582d1c6d27a522e11b03b97dff7b9","title":"Filter","content":"\n<Notebook\n  v-slot=\"nb\"\n  branch=\"master\"\n  repo=\"machow/purview\"\n  url=\"https://mybinder.org\"\n  useBinder=\"1\"\n  useStorage=\"1\"\n  >\n\n\n<details v-fix-codemirror v-show=\"nb.debut\">\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\" :onReady=\"nb.updateSetupCode\"  language=\"python\">\n\n\n    # TODO: explain how to run this, and that they only need the gist (loads tools)\n    \n    # wranglign ---------\n    import pandas as pd\n    from siuba import *\n    \n    # plotting ----------\n    from plotnine import *\n    \n    theme_set(theme_classic(base_family = \"Noto Sans CJK JP\"))\n    \n    # data --------------\n    #fname = \"/Users/machow/Dropbox/Repo/siublocks-org/intro-tidyverse/tutorial/data/music200.csv\"\n    fname = \"https://siublocks.s3.us-east-2.amazonaws.com/course-data/music200.csv\"\n    music_top200 = pd.read_csv(fname)\n    \n    # tracks\n    #fname = \"/Users/machow/Dropbox/Repo/siublocks-org/intro-tidyverse/tutorial/data/track_features.csv\"\n    fname = \"https://siublocks.s3.us-east-2.amazonaws.com/course-data/track_features.csv\"\n    track_features = pd.read_csv(fname)\n    \n    # student support ----------\n    from siuba import pipe\n    from IPython.display import HTML, display\n    from siututor import Blank\n    ___ = Blank()\n    \n    # DataFrame display --------\n    pd.set_option(\"display.max_rows\", 6)\n    \n    from IPython import get_ipython\n    # special ipython function to get the html formatter\n    html_formatter = get_ipython().display_formatter.formatters['text/html']\n    \n    # here, we avoid the default df._repr_html_ method, since it inlines css\n    # (style tags make vue angry)\n    html_formatter.for_type(\n        pd.DataFrame,\n        lambda df: df.to_html(max_rows = pd.get_option(\"display.max_rows\"), show_dimensions = True)\n    )\n    \n    \n\n\n\n\n</code-cell>\n</details>\n\nimport slides from '../slides/01b-slides.markdown'\n\n<RevealSlides :slides=\"slides\" />\n\n### Exercise 1: \n\nThe code below is filtering to keep only hits where `country` is United States.\nChange the filter to get hits from Canada.\n\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  ex=\"a\" :exIndx=\"0\" language=\"python\">\n\n\n    (music_top200\n      >> filter(_.country == \"United States\")\n    )\n\n\n<template v-slot:output>\n\n\n\n\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>country</th>\n      <th>position</th>\n      <th>track_name</th>\n      <th>artist</th>\n      <th>streams</th>\n      <th>duration</th>\n      <th>continent</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>7800</th>\n      <td>United States</td>\n      <td>1</td>\n      <td>The Box</td>\n      <td>Roddy Ricch</td>\n      <td>12987027</td>\n      <td>196.653</td>\n      <td>Americas</td>\n    </tr>\n    <tr>\n      <th>7801</th>\n      <td>United States</td>\n      <td>2</td>\n      <td>Myron</td>\n      <td>Lil Uzi Vert</td>\n      <td>9163134</td>\n      <td>224.955</td>\n      <td>Americas</td>\n    </tr>\n    <tr>\n      <th>7802</th>\n      <td>United States</td>\n      <td>3</td>\n      <td>Blueberry Faygo</td>\n      <td>Lil Mosey</td>\n      <td>8043475</td>\n      <td>162.547</td>\n      <td>Americas</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>7997</th>\n      <td>United States</td>\n      <td>198</td>\n      <td>Lights Up</td>\n      <td>Harry Styles</td>\n      <td>1606234</td>\n      <td>172.227</td>\n      <td>Americas</td>\n    </tr>\n    <tr>\n      <th>7998</th>\n      <td>United States</td>\n      <td>199</td>\n      <td>Without Me</td>\n      <td>Halsey</td>\n      <td>1606153</td>\n      <td>201.661</td>\n      <td>Americas</td>\n    </tr>\n    <tr>\n      <th>7999</th>\n      <td>United States</td>\n      <td>200</td>\n      <td>Enemies (feat. DaBaby)</td>\n      <td>Post Malone</td>\n      <td>1597824</td>\n      <td>196.760</td>\n      <td>Americas</td>\n    </tr>\n  </tbody>\n</table>\n<p>200 rows × 7 columns</p>\n\n\n\n</template>\n\n</code-cell>\n\n<prompt-expandable header=\"Comparing results, which artist is in the top 3 in both (the) United States and Canada?\">\n\n<q-multiple-choice>\n  <q-opt text=\"Roddy Ricch\"><span>Nailed it!</span></q-opt>\n  <q-opt text=\"The Weeknd\"><span>That artist is only top 3 in the United States</span></q-opt>\n  <q-opt text=\"Tones And I\"><span>That artist is only top 3 in the Canada</span></q-opt>\n</q-multiple-choice>\n\n</prompt-expandable>\n\n### Exercise 2: \n\n* Filter to keep tracks where position equals 5.\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  ex=\"a\" :exIndx=\"0\" language=\"python\">\n\n\n    (music_top200\n      >> filter(___)\n    )\n\n\n<template v-slot:output>\n\n\n\n\n⚠️: <b>Don't forget to replace all the blanks!</b>\n\n\n\n</template>\n\n</code-cell>\n\n<prompt-expandable header=\"Which artist is in position 5 in South Africa?\">\n\n<q-multiple-choice>\n  <q-opt text=\"Bad Bunny\"><span></span></q-opt>\n  <q-opt text=\"Eminem\"><span>That's right!</span></q-opt>\n  <q-opt text=\"BTS\"><span></span></q-opt>\n  <q-opt text=\"Selena Gomes\"><span></span></q-opt>  \n</q-multiple-choice>\n\n</prompt-expandable>\n\n### Exercise 3:\n\nFind the top 5 songs in Hong Kong.\n\nIn the slides we discussed the `==` operator. Here is a longer list of some options!\n\n| operator | meaning |\n| -------- | ------- |\n| `==`     | is equal to |\n| `<`      | is less than |\n| `>`      | is greater than |\n\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  ex=\"a\" :exIndx=\"0\" language=\"python\">\n\n\n    (music_top200\n      >> filter(___, ___)\n    )\n\n\n<template v-slot:output>\n\n\n\n\n⚠️: <b>Don't forget to replace all the blanks!</b>\n\n\n\n</template>\n\n</code-cell>\n\n\n### Exercise 4: looking at The Weeknd's streams\n\nHow many times has The Weeknd had over 1,000,000 streams?\n\n<details>\n    <summary>Hint:</summary>\n    Do in steps. Run first to get all rows where the artist is The Weeknd, and then modify your code to get where he has over 1,000,000 streams.\n</details>\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  ex=\"a\" :exIndx=\"0\" language=\"python\">\n\n\n    (\n    \n    )\n\n\n<template v-slot:output>\n\n\n\n\n    ()\n\n\n\n</template>\n\n</code-cell>\n\n\n\n</Notebook>\n\n","chapters":[],"authors":[],"resources":[]}},"context":{}}