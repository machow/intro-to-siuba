{"hash":"39b83d602c2799b7a6ebfedbc27f1e1d109a7f85","data":{"metadata":{"siteName":"Siuba tutorials","siteDescription":""},"page":{"id":"cce2a731d9223cc9c35f6ffb69ea5176","title":"Wrap up","content":"\n<Notebook\n  v-slot=\"nb\"\n  branch=\"master\"\n  repo=\"machow/purview\"\n  url=\"https://mybinder.org\"\n  useBinder=\"1\"\n  useStorage=\"1\"\n  >\n\n\n<details v-fix-codemirror v-show=\"nb.debut\">\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\" :onReady=\"nb.updateSetupCode\"  language=\"python\">\n\n\n    # TODO: explain how to run this, and that they only need the gist (loads tools)\n    \n    # wranglign ---------\n    import pandas as pd\n    from siuba import *\n    \n    # plotting ----------\n    from plotnine import *\n    \n    theme_set(theme_classic(base_family = \"Noto Sans CJK JP\"))\n    \n    # data --------------\n    #fname = \"/Users/machow/Dropbox/Repo/siublocks-org/intro-tidyverse/tutorial/data/music200.csv\"\n    fname = \"https://siublocks.s3.us-east-2.amazonaws.com/course-data/music200.csv\"\n    music_top200 = pd.read_csv(fname)\n    \n    # tracks\n    #fname = \"/Users/machow/Dropbox/Repo/siublocks-org/intro-tidyverse/tutorial/data/track_features.csv\"\n    fname = \"https://siublocks.s3.us-east-2.amazonaws.com/course-data/track_features.csv\"\n    track_features = pd.read_csv(fname)\n    \n    # student support ----------\n    from siuba import pipe\n    from IPython.display import HTML, display\n    from siututor import Blank\n    ___ = Blank()\n    \n    # DataFrame display --------\n    pd.set_option(\"display.max_rows\", 6)\n    \n    from IPython import get_ipython\n    # special ipython function to get the html formatter\n    html_formatter = get_ipython().display_formatter.formatters['text/html']\n    \n    # here, we avoid the default df._repr_html_ method, since it inlines css\n    # (style tags make vue angry)\n    html_formatter.for_type(\n        pd.DataFrame,\n        lambda df: df.to_html(max_rows = pd.get_option(\"display.max_rows\"), show_dimensions = True)\n    )\n    \n    \n\n\n\n\n</code-cell>\n</details>\n\n\n### Putting it together\n\nThis lesson shows what the beginning of an analysis might look like.\nGenerally, data analysis is done in **notebooks**, like this one. In a notebook, you can alternate between blocks of code and narrative text.\n\nThe first part of an analysis is often **importing** tools you will need for the analysis.\nFor example, verbs like `filter` and `mutate` are imported from siuba.\n\nAnother coding concept you'll see in this example is a **comment**.\nThese are lines of code that start with `#`.\nIn this case, the line is not treated as code, but a note for the reader.\n\nThe imports for this analysis are shown below.\n\n```python\n# here we import verbs like filter, arrange, and mutate from siuba.\n# the import * means to import all of siuba's verbs.\nfrom siuba import *\n\n# here we import everything for plotting from plotnine (like ggplot())\nfrom plotnine import *\n\n# here we import the data for the course\n# note that rather than using * to get everything, you can name\n# specific things to import (like track_features)\nfrom music_top200 import music_top200, track_features\n```\n\n### Exercise 1:\n\nFor the artist with the top track in Spain, what country has the most streams for one of their tracks?\n\nNote: you may need to code multiple times.\n\n<details>\n  <summary>hint</summary>\n    \n  > First, find the artist in the top position in Spain. After, can you get only that artists tracks? Once you do that you should be close!\n    \n</details>\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  ex=\"a\" :exIndx=\"0\" language=\"python\">\n\n\n    # getting most streamed track for top artist in Spain\n    (\n    \n    \n    )\n\n\n<template v-slot:output>\n\n\n\n\n    ()\n\n\n\n</template>\n\n</code-cell>\n\n\n### Exercise 2:\n\nSubset to keep only tracks in Hong Kong, then calculate a new column called stream_seconds, that's equal to streams times their duration.\n\nOnce you've done that, try deleting the comments (`#`) in the code below to plot the data.\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  ex=\"a\" :exIndx=\"0\" language=\"python\">\n\n\n    (music_top200\n      >> ___\n      >> ___\n      #>> ggplot(aes(\"stream_seconds\", \"position\", color = \"duration\"))\n      # + geom_point()\n    )\n\n\n<template v-slot:output>\n\n\n\n\n⚠️: <b>Don't forget to replace all the blanks!</b>\n\n\n\n</template>\n\n</code-cell>\n\n\n\n</Notebook>\n\n","chapters":[],"authors":[],"resources":[]}},"context":{}}