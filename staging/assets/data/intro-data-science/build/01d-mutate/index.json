{"hash":"50bdab72aa6540221f08214ab3b9840986c51c83","data":{"metadata":{"siteName":"Siuba tutorials","siteDescription":""},"page":{"id":"ab23fa24aeb29459d678ca42733d0864","title":"Mutate","content":"\n<Notebook\n  v-slot=\"nb\"\n  branch=\"master\"\n  repo=\"machow/purview\"\n  url=\"https://mybinder.org\"\n  useBinder=\"1\"\n  useStorage=\"1\"\n  >\n\n\n<details v-fix-codemirror v-show=\"nb.debut\">\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\" :onReady=\"nb.updateSetupCode\"  language=\"python\">\n\n\n    # TODO: explain how to run this, and that they only need the gist (loads tools)\n    \n    # wranglign ---------\n    import pandas as pd\n    from siuba import *\n    \n    # plotting ----------\n    from plotnine import *\n    \n    theme_set(theme_classic(base_family = \"Noto Sans CJK JP\"))\n    \n    # data --------------\n    #fname = \"/Users/machow/Dropbox/Repo/siublocks-org/intro-tidyverse/tutorial/data/music200.csv\"\n    fname = \"https://siublocks.s3.us-east-2.amazonaws.com/course-data/music200.csv\"\n    music_top200 = pd.read_csv(fname)\n    \n    # tracks\n    #fname = \"/Users/machow/Dropbox/Repo/siublocks-org/intro-tidyverse/tutorial/data/track_features.csv\"\n    fname = \"https://siublocks.s3.us-east-2.amazonaws.com/course-data/track_features.csv\"\n    track_features = pd.read_csv(fname)\n    \n    # student support ----------\n    from siuba import pipe\n    from IPython.display import HTML, display\n    from siututor import Blank\n    ___ = Blank()\n    \n    # DataFrame display --------\n    pd.set_option(\"display.max_rows\", 6)\n    \n    from IPython import get_ipython\n    # special ipython function to get the html formatter\n    html_formatter = get_ipython().display_formatter.formatters['text/html']\n    \n    # here, we avoid the default df._repr_html_ method, since it inlines css\n    # (style tags make vue angry)\n    html_formatter.for_type(\n        pd.DataFrame,\n        lambda df: df.to_html(max_rows = pd.get_option(\"display.max_rows\"), show_dimensions = True)\n    )\n    \n    \n\n\n\n\n</code-cell>\n</details>\n\nimport slides from '../slides/01d-slides.markdown'\n\n<RevealSlides :slides=\"slides\" />\n\n### Exercise 0:\n\nDelete the `#` symbol on the line `# music_top200`. This symbol is called a comment, and causes everything to the right of it to be ignored.\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  ex=\"a\" :exIndx=\"0\" language=\"python\">\n\n\n    # I am a helpful not. I am not code!\n    \n    # music_top200\n\n\n\n\n</code-cell>\n\n\n### Exercise 1:\n\nCurrently, the `duration` is calculated in seconds.\n\n* Delete (uncomment) the `#` symbol in the code.\n* Complete the code to convert duration to milliseconds.\n\n<details>\n  <summary>hint</summary>\n  \n  > Delete the # symbol. This is called a comment. When it is the first non-blank on a line, it stops that line from being run.\n  \n  > 1 second is 1000 milliseconds. So you would multiply the duration by 1000.\n</details>\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  ex=\"a\" :exIndx=\"0\" language=\"python\">\n\n\n    (music_top200\n      # >> mutate(___ = ___)\n    )\n\n\n<template v-slot:output>\n\n\n\n\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>country</th>\n      <th>position</th>\n      <th>track_name</th>\n      <th>artist</th>\n      <th>streams</th>\n      <th>duration</th>\n      <th>continent</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Argentina</td>\n      <td>1</td>\n      <td>Tusa</td>\n      <td>KAROL G</td>\n      <td>1858666</td>\n      <td>200.960</td>\n      <td>Americas</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Argentina</td>\n      <td>2</td>\n      <td>Tattoo</td>\n      <td>Rauw Alejandro</td>\n      <td>1344382</td>\n      <td>202.887</td>\n      <td>Americas</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Argentina</td>\n      <td>3</td>\n      <td>Hola - Remix</td>\n      <td>Dalex</td>\n      <td>1330011</td>\n      <td>249.520</td>\n      <td>Americas</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>12397</th>\n      <td>South Africa</td>\n      <td>198</td>\n      <td>Black And White</td>\n      <td>Niall Horan</td>\n      <td>11771</td>\n      <td>193.090</td>\n      <td>Africa</td>\n    </tr>\n    <tr>\n      <th>12398</th>\n      <td>South Africa</td>\n      <td>199</td>\n      <td>When I See U</td>\n      <td>Fantasia</td>\n      <td>11752</td>\n      <td>217.347</td>\n      <td>Africa</td>\n    </tr>\n    <tr>\n      <th>12399</th>\n      <td>South Africa</td>\n      <td>200</td>\n      <td>Psycho!</td>\n      <td>MASN</td>\n      <td>11743</td>\n      <td>197.217</td>\n      <td>Africa</td>\n    </tr>\n  </tbody>\n</table>\n<p>12400 rows × 7 columns</p>\n\n\n\n</template>\n\n</code-cell>\n\n\n### Exercise 2:\n\nUncomment the mutate in the pipe below. Can you fix the two errors in it?\n\nIt should return data with a new column on the right, that divides position by 200.\n\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  ex=\"a\" :exIndx=\"0\" language=\"python\">\n\n\n    (music_top200\n      # >> mutate(new position = position / 200)\n    )\n\n\n<template v-slot:output>\n\n\n\n\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>country</th>\n      <th>position</th>\n      <th>track_name</th>\n      <th>artist</th>\n      <th>streams</th>\n      <th>duration</th>\n      <th>continent</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Argentina</td>\n      <td>1</td>\n      <td>Tusa</td>\n      <td>KAROL G</td>\n      <td>1858666</td>\n      <td>200.960</td>\n      <td>Americas</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Argentina</td>\n      <td>2</td>\n      <td>Tattoo</td>\n      <td>Rauw Alejandro</td>\n      <td>1344382</td>\n      <td>202.887</td>\n      <td>Americas</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Argentina</td>\n      <td>3</td>\n      <td>Hola - Remix</td>\n      <td>Dalex</td>\n      <td>1330011</td>\n      <td>249.520</td>\n      <td>Americas</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>12397</th>\n      <td>South Africa</td>\n      <td>198</td>\n      <td>Black And White</td>\n      <td>Niall Horan</td>\n      <td>11771</td>\n      <td>193.090</td>\n      <td>Africa</td>\n    </tr>\n    <tr>\n      <th>12398</th>\n      <td>South Africa</td>\n      <td>199</td>\n      <td>When I See U</td>\n      <td>Fantasia</td>\n      <td>11752</td>\n      <td>217.347</td>\n      <td>Africa</td>\n    </tr>\n    <tr>\n      <th>12399</th>\n      <td>South Africa</td>\n      <td>200</td>\n      <td>Psycho!</td>\n      <td>MASN</td>\n      <td>11743</td>\n      <td>197.217</td>\n      <td>Africa</td>\n    </tr>\n  </tbody>\n</table>\n<p>12400 rows × 7 columns</p>\n\n\n\n</template>\n\n</code-cell>\n\n\n### Exercise 3: \n\nThe mutate below uses code from a future chapter to calculate how many letters are in each artist's name.\n\nWhich artist with the shortest name has the most streams?\n\n<details>\n  <summary>hint</summary>\n  \n  > You'll need to use an arrange in the pipe with 2 arguments.\n</details>\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  ex=\"a\" :exIndx=\"0\" language=\"python\">\n\n\n    (music_top200\n      >> mutate(artist_length = _.artist.str.len())\n    )\n\n\n<template v-slot:output>\n\n\n\n\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>country</th>\n      <th>position</th>\n      <th>track_name</th>\n      <th>artist</th>\n      <th>streams</th>\n      <th>duration</th>\n      <th>continent</th>\n      <th>artist_length</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Argentina</td>\n      <td>1</td>\n      <td>Tusa</td>\n      <td>KAROL G</td>\n      <td>1858666</td>\n      <td>200.960</td>\n      <td>Americas</td>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Argentina</td>\n      <td>2</td>\n      <td>Tattoo</td>\n      <td>Rauw Alejandro</td>\n      <td>1344382</td>\n      <td>202.887</td>\n      <td>Americas</td>\n      <td>14</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Argentina</td>\n      <td>3</td>\n      <td>Hola - Remix</td>\n      <td>Dalex</td>\n      <td>1330011</td>\n      <td>249.520</td>\n      <td>Americas</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>12397</th>\n      <td>South Africa</td>\n      <td>198</td>\n      <td>Black And White</td>\n      <td>Niall Horan</td>\n      <td>11771</td>\n      <td>193.090</td>\n      <td>Africa</td>\n      <td>11</td>\n    </tr>\n    <tr>\n      <th>12398</th>\n      <td>South Africa</td>\n      <td>199</td>\n      <td>When I See U</td>\n      <td>Fantasia</td>\n      <td>11752</td>\n      <td>217.347</td>\n      <td>Africa</td>\n      <td>8</td>\n    </tr>\n    <tr>\n      <th>12399</th>\n      <td>South Africa</td>\n      <td>200</td>\n      <td>Psycho!</td>\n      <td>MASN</td>\n      <td>11743</td>\n      <td>197.217</td>\n      <td>Africa</td>\n      <td>4</td>\n    </tr>\n  </tbody>\n</table>\n<p>12400 rows × 8 columns</p>\n\n\n\n</template>\n\n</code-cell>\n\n\n<prompt-expandable header=\"\">\n\n<q-multiple-choice>\n  <q-opt text=\"V, for their track in Indonesia\"><span>That's right!</span></q-opt>\n  <q-opt text=\"V, for their track in Hong Kong\"><span>That's the right artist, but did you sort by most streams first?</span></q-opt>\n  <q-opt text=\"F, for their track in Finland\"><span>Incorrect. Did you sort by most streams first?</span></q-opt>\n    <q-opt text=\"F, for their track in Hong Kong\"><span>Incorrect. Did you sort by most streams first?</span></q-opt>\n</q-multiple-choice>\n\n</prompt-expandable>\n\n\n</Notebook>\n\n","chapters":[],"authors":[],"resources":[]}},"context":{}}